


<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Dynamic Timer Components with Voice Recorder</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Rethink+Sans:wght@400..800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="config">
    <label>
      <input type="checkbox" id="notifyCheckbox" />
      Enable System Notifications
    </label>
    <br />
    <label class="defaultTimeLabel">
      Default Time:
      <input type="text" id="defaultTime" value="5:00" placeholder="Default Time M:SS" />
    </label>
    <div class="btn-container inline-block">
      <button id="addTimerBtn" title="Add A Timer">‚ûï</button>
    </div>
    <div id="voteData">Total Votes: 0</div>
    <button id="resetVotesBtn" title="Reset Votes">Reset Votes</button>

    <div id="mainTimerContainer" class="timer">
      <input type="text" id="timerTitle" class="timer-title" value="Total Time" oninput="updateTimerTitle()" />
      <input type="text" id="mainTimer" class="timer-value" value="10:00" oninput="updateMainTimerFromInput()" />
      <button id="toggleStartPauseBtn" onclick="toggleStartPause()">‚ñ∂Ô∏è</button>
      <button onclick="resetMainTimer()">üîÑ</button>
    </div>
  </div>

  <div id="timerList">
    <!-- Timer components will be added here dynamically -->
  </div>

  <div id="contentDisplayContainer">
    <h2>Content Display</h2>
  </div>

  <div id="counterDisplay">
    Individual: <span id="individualCount">0</span> | 
    Particular: <span id="particularCount">0</span> | 
    Universal: <span id="universalCount">0</span>
  </div>
  <div id="timerList"></div>

  <!-- WebSocket Message Input -->
  <div class="websocket-container">
    <h3>Send Message to Server</h3>
    <input type="text" id="messageInput" placeholder="Enter your message..." />
    <button id="sendMessageBtn">Send</button>
</div>


<div id="messageDisplay"></div> <!-- Added to show received messages -->


  <script src="server.js"></script>
  <script src="main-timer.js"></script>
 



  <script>
    const socket = new WebSocket("ws://localhost:8082");

    socket.onopen = function () {
        console.log("Connected to WebSocket server");
    };

    socket.onmessage = function (event) {
        console.log("Message from server:", event.data);

        // ‚úÖ Display received messages on all tabs
        const messageContainer = document.createElement("p");
        messageContainer.textContent = "Received: " + event.data;
        document.getElementById("messageDisplay").appendChild(messageContainer);
    };

    socket.onclose = function () {
        console.log("Disconnected from WebSocket server. Reconnecting...");
        setTimeout(() => {
            location.reload(); // Automatically reloads to reconnect
        }, 2000);
    };

    socket.onerror = function (error) {
        console.error("WebSocket Error:", error);
    };

    document.getElementById("sendMessageBtn").addEventListener("click", function () {
        const message = document.getElementById("messageInput").value;
        if (message.trim() !== "") {
            socket.send(message);
            console.log("Sent to server:", message);
            document.getElementById("messageInput").value = "";
        }
    });
</script>

</body>

</html>
